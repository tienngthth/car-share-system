
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>model.localDatabase &#8212; CloudCar 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for model.localDatabase</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Class Database is to create and connect to the database for recording and retrieving data. This is only for storing the current user. Google cloud databae is used for all other application features.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">import</span> <span class="nn">pathlib</span>



<div class="viewcode-block" id="LocalDatabase"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase">[docs]</a><span class="k">class</span> <span class="nc">LocalDatabase</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    All functions in this file are stored in this class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">db_path</span> <span class="o">=</span> <span class="s2">&quot;databases/ap.db&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">curs</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#Connect to database</span>
<div class="viewcode-block" id="LocalDatabase.setup_connection"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase.setup_connection">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">setup_connection</span><span class="p">(</span><span class="n">db_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a connection to the local database at the given path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">db_path</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">db_path</span> <span class="o">=</span> <span class="n">db_path</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">LocalDatabase</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span> <span class="o">=</span> <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>  </div>

    <span class="c1">#Create a new table</span>
<div class="viewcode-block" id="LocalDatabase.create_table"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase.create_table">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_table</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">tb_name</span><span class="p">,</span> <span class="n">db_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">setup_connection</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS &quot;</span><span class="o">+</span> <span class="n">tb_name</span><span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE &quot;</span> <span class="o">+</span> <span class="n">tb_name</span> <span class="o">+</span> <span class="n">columns</span><span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

    <span class="c1">#Insert data record by record</span>
<div class="viewcode-block" id="LocalDatabase.insert_record"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase.insert_record">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">insert_record</span><span class="p">(</span><span class="n">tb_name</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">db_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Insert data record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">setup_connection</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>      
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO &quot;</span> <span class="o">+</span> <span class="n">tb_name</span> <span class="o">+</span> <span class="s2">&quot; values&quot;</span> <span class="o">+</span> <span class="n">values</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

    <span class="c1">#Retrieve data of one record</span>
<div class="viewcode-block" id="LocalDatabase.select_a_record"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase.select_a_record">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">select_a_record</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">tb_name</span><span class="p">,</span> <span class="n">extra</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">db_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve data of one record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">setup_connection</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT &quot;</span> 
            <span class="o">+</span> <span class="n">columns</span> 
            <span class="o">+</span> <span class="s2">&quot; FROM &quot;</span>
            <span class="o">+</span> <span class="n">tb_name</span>
            <span class="o">+</span> <span class="n">extra</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">return_value</span> <span class="o">=</span> <span class="n">row</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">return_value</span></div>

<div class="viewcode-block" id="LocalDatabase.select_a_record_parameterized"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase.select_a_record_parameterized">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">select_a_record_parameterized</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">tb_name</span><span class="p">,</span> <span class="n">extra</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">db_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select records based on criteria set in given parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">setup_connection</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT &quot;</span> 
            <span class="o">+</span> <span class="n">columns</span> 
            <span class="o">+</span> <span class="s2">&quot; FROM &quot;</span>
            <span class="o">+</span> <span class="n">tb_name</span>
            <span class="o">+</span> <span class="n">extra</span>
            <span class="p">,</span> <span class="n">parameters</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">return_value</span> <span class="o">=</span> <span class="n">row</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">return_value</span></div>

<div class="viewcode-block" id="LocalDatabase.delete_record"><a class="viewcode-back" href="../../Users%20and%20Cars.html#model.localDatabase.LocalDatabase.delete_record">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">delete_record</span><span class="p">(</span><span class="n">tb_name</span><span class="p">,</span> <span class="n">conditions</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">db_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">setup_connection</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">curs</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;DELETE FROM &quot;</span> 
            <span class="o">+</span> <span class="n">tb_name</span> 
            <span class="o">+</span> <span class="n">conditions</span>
            <span class="p">,</span> <span class="n">parameters</span>
        <span class="p">)</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="n">LocalDatabase</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Menus.html">Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Users%20and%20Cars.html">Users and Cars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Facial%20Recognition.html">Facial Recognition</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Minh Nguyen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>