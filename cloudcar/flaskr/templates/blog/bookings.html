{% extends 'base.html' %}

{% block scripts %}
  {{ super() }}
  {{ datepicker.loader() }} {# to load jQuery-ui #}
  {{ datepicker.picker(id=".dp") }}
{% endblock %}

{% block header %}

 
{% endblock %}



{% block content %}

<div class="formwrapper">
  <h2 class="title">Manage my Bookings</h2>
  <form method="POST" action="bookings">
      <div style="display:block; width:100%; clear:both; float:none;">
      <div class="form-field">{{ form.start.label }} {{ form.start() }}</div>
      </div>
      <div style="display:block; width:100%; clear:both; float:none; min-height:50px; padding-top:10px;">
      <div class="form-submit"> {{ form.submit }} </div>
      </div>
     
  </form>
</div>

    
     <table>
  <tr>
    <th style="border-top-left-radius: 8px;">Date</th>
    <th>Car ID</th>
    <th>Make</th>
    <th>Colour</th>
    <th>Duration</th>
    <th>Status</th>
    {% if g.type == "Customer" %}
    <th style="border-top-right-radius: 8px;">Action</th>
    {% endif %}
    {% if g.type == "Admin" %}
    <th style="border-top-right-radius: 8px;">Customer ID</th>
    {% endif %}
  </tr>
  {% for booking in bookings %}
  <tr>
  <td>{{ booking["RentTime"] }}</td>
  <td>{{ booking["CarID"] }}</td>
  <td>{{ booking["Brand"] }}</td>
  <td>{{ booking["Color"] }}</td>
  <td>{{ booking["Duration"] }}</td>
  <td>{{ booking["Status"] }}</td>
  {% if g.type == "Admin" %}
  <td>{{ booking["CustomerID"] }}</td>
  {% endif %}
  {% if booking["Status"] == "Booked" and g.type == "Customer" %}
  <td style="max-width:40px;">
    <form style="margin:0px;" action="{{ url_for('blog.cancel_booking', ID=booking['ID']) }}" method="post">
    <input style="margin:0px;" class="warning" type="submit" value="Cancel" onclick="return confirm('Are you sure you want to cancel this booking?');">
    </form>
  </td>
  {% endif %}
  </tr>
  
  {% endfor %}
  </table> 
{% endblock %}
